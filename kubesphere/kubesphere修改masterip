要更改 KubeSphere 的 IP，您需要修改 Kubernetes 集群的 IP 地址。以下是一些可能的步骤：

1. 在 Kubernetes 集群中，使用 kubeadm 工具更改控制平面节点的 IP 地址。可以使用以下命令：

   ```
   sudo kubeadm init phase control-plane all --apiserver-advertise-address=<new-ip-address>
   ```

   其中 `<new-ip-address>` 是您要更改为的新 IP 地址。

2. 更新 kubelet 的 IP 地址。可以使用以下命令：

   ```
   sudo sed -i 's/--address=127.0.0.1/--address=<new-ip-address>/g' /etc/systemd/system/kubelet.service.d/10-kubeadm.conf
   sudo systemctl daemon-reload
   sudo systemctl restart kubelet
   ```

   其中 `<new-ip-address>` 是您要更改为的新 IP 地址。

3. 更新 KubeSphere 的配置。可以使用以下命令：

   ```
   kubectl edit cm ks-installer -n kubesphere-system
   ```

   这将打开一个文本编辑器，您可以在其中编辑 KubeSphere 的配置。找到 `kubesphere_domain` 和 `kubernetes_service_addresses` 字段，并将其更改为新的 IP 地址。

   ```
   kubesphere_domain: <new-ip-address>
   kubernetes_service_addresses: <new-ip-address>
   ```

   保存并关闭编辑器。

4. 重新部署 KubeSphere。可以使用以下命令：

   ```
   kubectl apply -f https://github.com/kubesphere/ks-installer/releases/download/v3.1.0/kubesphere-installer.yaml
   ```

   这将重新部署 KubeSphere，并将新的 IP 地址应用于所有组件。

请注意，这些步骤可能因您的环境而异。如果您不确定如何更改 IP 地址，请咨询您的系统管理员或网络管理员。

步骤二、
经过实际验证的修改 master IP 地址的操作步骤，千真万确，错一罚十，kubernetes 版本是 v1.20.2。折腾过程中所走的弯路是有4个ssl证书（apiserver, apiserver-kubelet-client, front-proxy-client）没有重新生成，造成修改 IP 后 kubectl 命令是可以正常执行但 master 总是处于 NotReady 状态。
经过实际验证的修改 master IP 地址的操作步骤，千真万确，错一罚十，kubernetes 版本是 v1.20.2。

折腾过程中所走的弯路是有4个ssl证书（apiserver, apiserver-kubelet-client, front-proxy-client）没有重新生成，造成修改 IP 后 kubectl 命令可以正常执行但 master 总是处于 NotReady 状态。

操作步骤如下：

1）替换 /etc/kubernetes 中与 IP 地址关联的配置
```
oldip=10.0.9.171
newip=172.16.16.102
cd /etc/kubernetes

find . -type f | xargs grep $oldip
find . -type f | xargs sed -i "s/$oldip/$newip/"
find . -type f | xargs grep $newip
```
2）修改 /etc/hosts 中涉及旧 IP 地址的解析（如果有）
```
vim /etc/hosts
%s/10.0.9.171/172.16.16.102
```
3）修改集群配置与旧 IP 地址相关的配置（advertiseAddress）
```
kubectl -n kube-system edit cm kubeadm-config 
%s/10.0.1.81/10.0.9.171
```
4）重新相关 ssl 证书

4.1）重新生成 etcd-server 证书
```
cd /etc/kubernetes/pki/etcd
rm server.crt server.key
kubeadm init phase certs etcd-server
```
4.2）重新生成 apiserver 证书
```
rm apiserver.crt apiserver.key
kubeadm init phase certs apiserver --control-plane-endpoint "k8s-api:6443"
```
4.3）重新生成 apiserver-kubelet-client 证书
```
rm apiserver-kubelet-client.crt apiserver-kubelet-client.key
kubeadm init phase certs apiserver-kubelet-client
```
4.4）重新生成 front-proxy-client 证书
```
rm front-proxy-client.crt front-proxy-client.key
kubeadm init phase certs front-proxy-client
```
5）重启 k8s 相关服务
```
systemctl daemon-reload && systemctl restart kubelet && systemctl restart docker
```
Kubernetes 高可用集群修改 Master IP 地址的正确姿势